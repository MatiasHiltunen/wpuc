(()=>{var c=`(()=>{var m=(n,e,t)=>new Promise((s,o)=>{var h=r=>{try{a(t.next(r))}catch(u){o(u)}},i=r=>{try{a(t.throw(r))}catch(u){o(u)}},a=r=>r.done?s(r.value):Promise.resolve(r.value).then(h,i);a((t=t.apply(n,e)).next())});var l={};self.postMessage({type:"worker_ready"});onmessage=n=>{let e=n.data;if(e.type==="html"){if(!e.url||!e.html)return console.log("no data with html message");l[e.url]=e;return}if(e.type==="url"){if(e.url==null)return;let t=e.url;if(console.log("Get html from worker for url: ",e.url),l[t]==null){fetch(t).then(s=>s.text()).then(s=>{l[t]={url:t,html:s},self.postMessage({html:l[t].html,type:"html",url:t})}).catch(console.error);return}self.postMessage({html:l[e.url].html,type:"html",url:t});return}if(e.type==="urlList"){if(e.urlList==null)return;let t=[];for(let s of e.urlList)l[s]==null&&(l[s]={url:s,html:""},t.push((()=>m(void 0,null,function*(){let o=yield fetch(s);l[s].html=yield o.text()}))()));Promise.allSettled(t).then(s=>{console.log(s)}).catch(console.error)}};})();
`;var u=window.self===window.top,w=()=>{var e;let s=document.getElementsByTagName("a"),r=(e=window==null?void 0:window.top)!=null?e:window,l=r.location.origin,n=r==null?void 0:r.includedPages,t=new Set;for(let i of s){let o=i.href;if(o.includes(l+"/wp-")){console.log("ignoring link:",o);continue}o.startsWith(l)&&(o.includes("#")&&(o=o.split("#")[0]),n.includes(o)&&t.add(o),i.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),r.wrkr.postMessage({url:o,type:"url"})}))}r.wrkr.postMessage({urlList:t,type:"urlList"})};if(u){window.onload=()=>{},document.onload=()=>{};let s=t=>{let e=document.createElement("iframe");return e.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;",e.referrerPolicy="strict-origin",e.name="wpuc-container",e.id="wpuc",e.srcdoc=t,e},r=URL.createObjectURL(new Blob([c],{type:"text/javascript; charset=UTF-8"}));window.wrkr=new Worker(r);let l=document.createElement("body"),n=s(document.documentElement.innerHTML);l.appendChild(n),document.body.replaceWith(l),window.onpopstate=()=>{var t;console.log("Pop:",window.location.href),window.location.href.startsWith(window.location.origin)&&((t=window.wrkr)==null||t.postMessage({url:window.location.href,type:"url"}))},window.wrkr.onmessage=t=>{let e=t.data;if(e.type==="worker_ready"){console.log("worker ready");return}if(e.type==="html"&&!!e.html){if(e.html==null)return;n.hasAttribute("srcdoc")&&n.removeAttribute("srcdoc"),n.contentWindow.document.open(),n.contentWindow.document.write(e.html),n.contentWindow.document.close(),window.history.pushState(null,"",e.url)}}}else console.log("not top, finding links..:"),document.addEventListener("DOMContentLoaded",w);})();
